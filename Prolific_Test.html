<!DOCTYPE html>
<html>
  <head>
    <title>Prolific Study</title> 

    <script src = "jspsych/jspsych.js" ></script>
    <script src = "jspsych/plugin-fullscreen.js" ></script>
    <script src = "jspsych/plugin-html-button-response.js" ></script>
    <script src = "jspsych/plugin-image-keyboard-response.js" ></script>
    <script src = "jspsych/plugin-video-keyboard-response.js" ></script>
    <script src = "jspsych/plugin-html-keyboard-response.js" ></script>
    <script src = "jspsych/plugin-instructions.js" ></script>
    <script src = "jspsych/plugin-preload.js" ></script>
    <script src = "jspsych/plugin-survey.js" ></script>
    <script src = "jspsych/plugin-survey-html-form.js" ></script>
    <script src = "jspsych/plugin-survey-multi-choice.js" ></script>
    <script src = "jspsych/utils.js" ></script>
    <script src = "jspsych/plugin-survey-text_SM.js" ></script>
    <link href = "jspsych/jspsych.css" rel= "stylesheet" type= "text/css">
    <script type="text/javascript" src= "jspsych/plugin-pavlovia_2022_1_1.js"></script>
    <style>
             body {
    background-color: silver;
            } 
      .jspsych-display-element {
          font-size: 40px;
          line-height: 1.6em;
      }
  </style>
  </head>
  <body></body>
  <script>


////////////////GUIDELINES FOR CONDITIONS
///CONTROL = 1, WHICH MEANS X / 3 REMAINDER = 1
//SOCIAL MEDIA = 2, WHICH MEANS X / 3  REMAINDER = 2
//NEWS BRIEF = 0, WHICH MEANS X / 3 REMAINDER = 0



// Constants
var TODAY = new Date();
var DD = String(TODAY.getDate()).padStart(2, '0'); // this gets the date 
var MM = String(TODAY.getMonth() + 1).padStart(2, '0');  // this gets the month  
var YYYY = TODAY.getFullYear();  // this gets the year

const DATE = YYYY + MM + DD;

const fulldate = new Date().toLocaleString().replace(',','');
console.log(fulldate);




 /* initialize jsPsych */
 function startExp() {}
var jsPsych = initJsPsych({
    on_finish: function() {
        var csv = jsPsych.data.get().csv();
        var filename = jsPsych.data.get().values()[0].PID + "_" + DATE + ".csv";
        downloadCSV(csv, filename);
        jsPsych.data.displayData()
    }
});



//Create timeline
var timeline = [];


 /* init connection with pavlovia.org */
 var pavlovia_init = {
			type: jsPsychPavlovia,
			command: "init"
		};
		timeline.push(pavlovia_init);



  timeline.push({
  type: jsPsychFullscreen,
  fullscreen_mode: true
  });




//Create stimulus index
var stimuli = [0, 1, 2, 3, 4, 5, 6, 7];


//Organize video stimuli
video1 = 'vids/video1.mp4'
video2 = 'vids/video2.mp4'
video3 = 'vids/video3.mp4'
video4 = 'vids/video4.mp4'
video5 = 'vids/video5.mp4'
video6 = 'vids/video6.mp4'
video7 = 'vids/video7.mp4'
video8 = 'vids/video8.mp4'


video_stimuli = [video1, video2, video3, video4, video5, video6, video7, video8];
console.log(video_stimuli);

//Organize images
video1_image = 'imgs/video1.png'
video2_image = 'imgs/video2.png'
video3_image = 'imgs/video3.png'
video4_image = 'imgs/video4.png'
video5_image = 'imgs/video5.png'
video6_image = 'imgs/video6.png'
video7_image =  'imgs/video7.png'
video8_image = 'imgs/video8.png'






image_stimuli = [video1_image, video2_image, video3_image, video4_image, video5_image, video6_image, video7_image, video8_image];





//Load in video and images
var preload = {
  type: jsPsychPreload,
  image: image_stimuli,
  video: video_stimuli
};

timeline.push(preload);





//Randomize index list
var RandList = jsPsych.randomization.shuffle(stimuli)
//var RandList = shuffle(stimuli)
console.log(RandList)

//Select 4 items from the random index list
var stimlist = jsPsych.randomization.sampleWithoutReplacement(RandList, 4);
console.log(stimlist);





///Welcome message and PID entry
var welcome = {
    type: jsPsychSurveyText,
    questions: [{prompt: "<p><div style ='font-size:50px;'>Welcome to the experiment!</div></p>" +
    "<p><div style ='font-size:50px;'>Please enter your participant ID.</div></p>", name: 'PID', required: true}],
    data: {startdate: fulldate},
    trial_duration: 0,
    on_finish: function(data) {
    // when this trial ends, check the data
    //console.log('response: ', data.response);
    var response = data.response;
    console.log(response)
    console.log(response.PID)
    //console.log(response.PID)
    id = Number(Object.values(response))
    console.log(id)
    jsPsych.data.addProperties({
        PID: response.PID, 
    })
    PID_condition = id % 3
    console.log(PID_condition)
},
}

timeline.push(welcome);




//I need to find a way to extract PID after the trial is done
//Maybe make its own timeline instead of pushing it to the timeline?

var control_instructions = {
    data: {
      instructions_type: "control instructions"
    },
    type: jsPsychInstructions,
    pages: [
        "<p><div style ='font-size:40px;'>You're about to watch a series of videos.</div></p>" +
        "<p><div style ='font-size:40px;'>After each video, you will be asked to write a short summary.</div></p>" +
        "<p><div style ='font-size:40px;'>The summary should be between <b>150 and 400 characters</b>.</div></p>" +
        "<p><div style ='font-size:40px;'>Press <b>Next</b> to begin.</div></p>",
    ],
    show_clickable_nav: true
}



var socialmedia_instructions = {
    data: {
        instructions_type: "social media instructions"
    },
    type: jsPsychInstructions,
    pages: [
        "<p><div style ='font-size:40px;'>You're about to watch a series of videos.</div></p>" +
        "<p><div style ='font-size:40px;'>After each video, you will be asked to write a social media post.</div></p>" +
        "<p><div style ='font-size:40px;'>The post should be between <b>150 and 400 characters</b>.</div></p>" +
        "<p><div style ='font-size:40px;'>This social media post will be assessed for its value to a social media audience.</div></p>" +
        "<p><div style ='font-size:40px;'>Press <b>Next</b> to begin.</div></p>", 
    ],
    show_clickable_nav: true
}



var news_instructions = {
    data: {
      instructions_type: "news instructions"
    },
    type: jsPsychInstructions,
    pages: [
        "<p><div style ='font-size:40px;'>You're about to watch a series of videos.</div></p>" +
        "<p><div style ='font-size:40px;'>After each video, you will be asked to write a news brief that could be used as part of a news article.</div></p>" +
        "<p><div style ='font-size:40px;'>The news brief should be between <b>150 and 400 characters</b>.</div></p>" +
        "<p><div style ='font-size:40px;'>This news brief will be assessed for its value to a social media audience.</div></p>" +
        "<p><div style ='font-size:40px;'>Press <b>Next</b> to begin.</div></p>",
    ],
    show_clickable_nav: true
}




var control_condition = {
    timeline: [control_instructions],
    conditional_function: function () {
        var data = jsPsych.data.get().last(1).values()[0];
        if (PID_condition === 1) {
            return true;
        } else {
            return false;
        }
    }
}



var control_start = {
    timeline: [control_condition]
};

timeline.push(control_start);




var socialmedia_condition = {
    timeline: [socialmedia_instructions],
    conditional_function: function () {
        var data = jsPsych.data.get().last(1).values()[0];
        if (PID_condition === 2) {
            return true;
        } else {
            return false;
        }
    }
}



var socialmedia_start = {
    timeline: [socialmedia_condition]
};

timeline.push(socialmedia_start);




var news_condition = {
    timeline: [news_instructions],
    conditional_function: function () {
        var data = jsPsych.data.get().last(1).values()[0];
        if (PID_condition === 0) {
            return true;
        } else {
            return false;
        }
    }
}



var news_start = {
    timeline: [news_condition]
};

timeline.push(news_start);








//Show 4 randomized videos
for (var i=0; i < stimlist.length; i++){
var video_trials = {
  data: jsPsych.timelineVariable("data"),
type: jsPsychVideoKeyboardResponse,
stimulus: [video_stimuli[stimlist[i]]],
width: 800,
height: 700,
data: {
  video_name: video_stimuli[stimlist[i]],
}
};

timeline.push(video_trials);
}




////////////////// Post-Video Memory Questions


var recall_instructions_block = {
    data: {
        screen_id: "recall_instructions"
    },
    type: jsPsychInstructions,
    pages: ["<p><div style ='font-size:40px;'>Next we will be showing you an image of a video clip you recently watched.</div</p>" + 
    "<p><div style ='font-size:40px;'>Please type everything that you can remember about this video clip.</div</p>" +
    "<p><div style ='font-size:40px;'>Spend at least 3 minutes trying to write down as much as you can remember about the video clip.</div></p>" +
    "<p><div style ='font-size:40px;'>Press <b>Next</b> to continue.</div</p>"],
    show_clickable_nav: true
};

timeline.push(recall_instructions_block);




//Fixation point
var fixation_point = {
    data: {screen_id: "fixation", stimulus: "+"}, //this adjusts the naming of the stimulus column in the to-be-exported csv file
    type: jsPsychHtmlKeyboardResponse,
    stimulus: "<div style='font-size: 100px'><b>+</b></div>",
    choices: "NO_KEYS",
    trial_duration: 500,
};



//Use this index to name the questions in the recall_response
questions_index = [0,1,2,3]


//Show 4 screenshots matching randomized videos
for (var i=0; i < stimlist.length; i++){

var image_trials_recall = {
data: jsPsych.timelineVariable("data"),
type: jsPsychImageKeyboardResponse,
prompt: "<p><div style ='font-size:40px;'><b>Here is a screenshot of a video you recently watched.</b></div></p>" +
"<p><div style ='font-size:40px;'><b>The next questions will be about this video.</b></div></p>",
stimulus: [image_stimuli[stimlist[i]]],
stimulus_width: 500,
stimulus_height: 400,
trial_duration: 5000,
data: {
image_name_recall: image_stimuli[stimlist[i]],
}
};

var recall_response = {
    data: jsPsych.timelineVariable("data"),
    type: jsPsychSurveyText,
    questions: [
        {prompt: "<p><div style ='font-size:30px;'>Please type everything that you can remember about this video clip.</div</p>" +
        "<p><div style ='font-size:30px;'>Spend at least 3 minutes trying to write down as much as you can remember about the video clip.</div></p>" +
        "<p><div style ='font-size:30px;'>The <b>Next</b> button will appear after 3 minutes.</div</p>",
        name: 'Recall_' + questions_index[i],
        rows: 30,  
        columns: 
        100, 
        required: true}
    ],
    trial_duration: 5000,
    data: {recall_responses: 'recall_response'},
};

timeline.push(fixation_point);
timeline.push(image_trials_recall);
timeline.push(recall_response);
}









/////Recognition Memory? 

//Recognition Memory multiple choice
var recognition_instruction_block = {
    data: {
        screen_id: "Post Task instructions"
    },
    type: jsPsychInstructions,
    pages: [
        "<p><div style ='font-size:40px;'>Next, we will be asking you more questions about the videos you just watched.</div></p>" + 
        "<p><div style ='font-size:40px;'>Prior to the questions, you will see a picture of the video we are asking you about.</div></p>" +
        "<p><div style ='font-size:40px;'>Press <b>Next</b> to continue.</div</p>"
    ],
    show_clickable_nav: true
}

timeline.push(recognition_instruction_block);





///Here is where the questions are organized into objects via nested timelines.
var video1_questions = {
  timeline: [
      {
        type: jsPsychSurveyMultiChoice,
        questions: [
        {prompt: "<b>What time did the fire start?</b>",
            name: 'video1_Question1',
            options: ['2:30AM', '4:00AM', '8:30PM', '2:00PM'], 
            required: true,
            horizontal: true,
        }]
      },
      {
        type: jsPsychSurveyMultiChoice,
         questions: [
          {prompt: "<b>Where in Baltimore County did this fire take place?</b>",
            name: 'video1_Question2',
            options: ['Owings Mills', 'Hampton', 'Overlea', 'Crofton'], 
            required: true,
            horizontal: true,
        },
         ],
    },
    {
    type: jsPsychSurveyMultiChoice,
    questions: [
        {prompt: "<b>Who woke the son up?</b>",
            name: 'video1_Question3',
            options: ['Mother', 'Father', 'Cat', 'Puppy'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
          {prompt: "<b>Where in the house did the fire start?</b>",
            name: 'video1_Question4',
            options: ['Basement', '1st floor', '2nd floor', 'Living room'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What object was to the right of the ambulance?</b>",
            name: 'video1_Question5',
            options: ['Fire Truck', 'House', 'Stop Sign', 'Car'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>In the beginning, where was the 'Live' icon displayed?</b>",
            name: 'video1_Question6',
            options: ['Basement', '1st floor', '2nd floor', 'Living room'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What was the color of the pick-up truck next to the house?</b>",
            name: 'video1_Question7',
            options: ['Red', 'Blue', 'Tan', 'Black'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What was the color of the reporter's jacket?</b>",
            name: 'video1_Question8',
            options: ['Green', 'Black', "Red", 'White'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>How many firefighers were on the ladder?</b>",
            name: 'video1_Question9',
            options: ['1', 'None', '3', '2'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      ],
}


var video2_questions = {
  timeline: [
      {
        type: jsPsychSurveyMultiChoice,
        questions: [
        {prompt: "<b>What was the name of the professor?</b>",
            name: 'video2_Question1',
            options: ['Professor Douglas', 'Professor Duma', 'Professor Carter', 'Professor Watts'],
            required: true,
            horizontal: true,
        }]
      },
      {
        type: jsPsychSurveyMultiChoice,
         questions: [
         {prompt: "<b>What does H.I.T.S. stand for?</b>",
            name: 'video2_Question2',
            options: ['Heart Intervals Tracking System', 'Head Impact Telemtry System', 'Head Impact Tracking Software', 'Heart Impact Telemetry System'], 
            required: true,
            horizontal: true,
        },
         ],
    },
    {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What do the H.I.T.S. helmet sensors measure?</b>",
            name: 'video2_Question3',
            options: ['Angle of the Head', 'Acceleration of the head', 'Blood flow in the head', 'Angle and Acceleration of the head'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>Where is the H.I.T.S. acronym revealed in the video?</b>",
            name: 'video2_Question4',
            options: ['Left', 'Top', 'Right', 'Bottom'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>In the first scene, where were the coaches standing?</b>",
            name: 'video2_Question5',
            options: ['To the right of the play', 'Behind the play', 'To the left of the play', 'No coaches were present'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What was displayed below the head diagram on the laptop?</b>",
            name: 'video2_Question6',
            options: ['A graph', 'Another head diagram', 'Nothing', 'Demographic information'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>In the beginning, what was the color of the football jerseys?</b>",
            name: 'video2_Question7',
            options: ['White', 'Navy Blue', 'Maroon', 'Green'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>How many sensors were inside the helmet?</b>",
            name: 'video2_Question8',
            options: ['Over 10', 'Under 10', "20", '30'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>In the intro scene, what number was the player in the yellow jersey wearing?</b>",
            name: 'video2_Question9',
            options: ['10', '22', '6', '42'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      ],
}


var video3_questions = {
  timeline: [
      {
        type: jsPsychSurveyMultiChoice,
        questions: [
        {prompt: "<b>What social media platform were the messages being displayed on?</b>",
            name: 'video3_Question1',
            options: ['Facebook', 'Instagram', 'Twitter', 'WhatsApp'], 
            required: true,
            horizontal: true,
        }]
      },
      {
        type: jsPsychSurveyMultiChoice,
         questions: [
         {prompt: "<b>Which country did Sir Clive Woodward Coach?</b>",
            name: 'video3_Question2',
            options: ['New Zealand', 'South Africa', 'England', 'Wales'], 
            required: true,
            horizontal: true,
        },
         ],
    },
    {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>Which country did Dan Carter play for?</b>",
            name: 'video3_Question3',
            options: ['New Zealand', 'South Africa', 'England', 'Wales'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>In the first scene, how many individuals had sunglasses?</b>",
            name: 'video3_Question4',
            options: ['3', 'None', '2', '1'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>In the first scene, how many individuals were on the screen?</b>",
            name: 'video3_Question5',
            options: ['1', '2', '3', '4'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>Where was the BBC News Banner being displayed?</b>",
            name: 'video3_Question6',
            options: ['Bottom', 'Top', 'Was not displayed', 'Top Right'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What was the color of the reporter's blazer?</b>",
            name: 'video3_Question7',
            options: ['White', 'Navy Blue', 'Beige', 'Black'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What color was the jersey of the rugby players during the news broadcast segment?</b>",
            name: 'video3_Question8',
            options: ['Green', 'White', "Black", 'Blue'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>In the intro scene, what was the player wearing around his neck?</b>",
            name: 'video3_Question9',
            options: ['Scarf', 'Neck brace', 'Nothing', 'Neck warmer'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      ],
}


var video4_questions = {
  timeline: [
      {
        type: jsPsychSurveyMultiChoice,
        questions: [
        {prompt: "<b>How many homes were undergoing re-modeling?</b>",
            name: 'video4_Question1',
            options: ['1', '2', '3', '4'], 
            required: true,
            horizontal: true,
        }]
      },
      {
        type: jsPsychSurveyMultiChoice,
         questions: [
         {prompt: "<b>What type of company is Peak One Builders?</b>",
            name: 'video4_Question2',
            options: ['General Contracting', 'Home Repair', 'Construction', 'Furniture Outlet'], 
            required: true,
            horizontal: true,
        },
         ],
    },
    {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What was the name of the Peak One Builders' owner?</b>",
            name: 'video4_Question3',
            options: ['Mike Christensen', 'Tyler Christensen', 'David Cannonier', 'Michael Owens'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>Where was the Fox Business Network Logo displayed on the screen?</b>",
            name: 'video4_Question4',
            options: ['Bottom right', 'Top right', 'Bottom left', 'Top left'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>Where was the business logo located?</b>",
            name: 'video4_Question5',
            options: ['Bottom right', 'Top right', 'Bottom left', 'Top left'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>Which tools were the workers using throughout the film?</b>",
            name: 'video4_Question6',
            options: ['Hammer', 'Drill', 'Hammer and Drill', 'Hammer, Drill, and Wrench'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>How many workers were standing on ladders?</b>",
            name: 'video4_Question7',
            options: ['1', '2', '0', '3'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What was the color of the worker's shirts?</b>",
            name: 'video4_Question8',
            options: ['Lime Green', 'Navy Blue', "Maroon", 'Orange'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What were the workers rolling on the dolley?</b>",
            name: 'video4_Question9',
            options: ['Boxes', 'Sand Bags', 'Water', 'Snacks'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      ],
}


var video5_questions = {
  timeline: [
      {
        type: jsPsychSurveyMultiChoice,
        questions: [
        {prompt: "<b>What was the name of the film festival?</b>",
            name: 'video5_Question1',
            options: ['Berlin International Film Festival', 'Belgium International Film Festival', 'Amsterdam Film Festival', 'Beirut Film Festival'], 
            required: true,
            horizontal: true,
        }]
      },
      {
        type: jsPsychSurveyMultiChoice,
         questions: [
         {prompt: "<b>How many photographers were invited by festival organizers to the festival?</b>",
            name: 'video5_Question2',
            options: ['8', '12', '18', '3'], 
            required: true,
            horizontal: true,
        },
         ],
    },
    {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>How many photos are taken at the festival every day?</b>",
            name: 'video5_Question3',
            options: ['More than 200,000', 'More than 100,000', 'Less than 50,000', 'Less than 20,000'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>Where does the map of the film festival location appear?</b>",
            name: 'video5_Question4',
            options: ['Bottom right', 'Top right', 'Bottom left', 'Top left'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>Where was the KCSM logo located?</b>",
            name: 'video5_Question5',
            options: ['Bottom right', 'Top right', 'Bottom left', 'Top left'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What does the celebrity do as her photo is being taken?</b>",
            name: 'video5_Question6',
            options: ['Waves hello', 'Spins', 'Stands still', 'Covers her face'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What was displayed in the first photo that was presented?</b>",
            name: 'video5_Question7',
            options: ['Two fingers', 'A celebrity', "The crowd's reaction", 'Selfie'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What was the color of the dress in the second photo that was presented?</b>",
            name: 'video5_Question8',
            options: ['Black', 'Light Blue', "White", 'Purple'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>At the end, what type of requipment was lying next to the stage?</b>",
            name: 'video5_Question9',
            options: ['Ladders', 'Hammers', 'Microphone', 'Red Carpet'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      ],
}


var video6_questions = {
  timeline: [
      {
        type: jsPsychSurveyMultiChoice,
        questions: [
        {prompt: "<b>What weather issues was the reporter discussing?</b>",
            name: 'video6_Question1',
            options: ['Mudslide', 'Thunderstorm', 'Snow', 'Hail'], 
            required: true,
            horizontal: true,
        }]
      },
      {
        type: jsPsychSurveyMultiChoice,
         questions: [
         {prompt: "<b>How many lanes were operating by the Vine Hill exit?</b>",
            name: 'video6_Question2',
            options: ['None', '1', '2', '4'], 
            required: true,
            horizontal: true,
        },
         ],
    },
    {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What did the land experts place in the ground?</b>",
            name: 'video6_Question3',
            options: ['Cones', 'Markers', 'Salt', 'Sand'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What object is seen next to the street light?</b>",
            name: 'video6_Question4',
            options: ['Tree', 'Street Sign', 'Store', 'Shopping Cart'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>Where was the 'Live' icon located?</b>",
            name: 'video6_Question5',
            options: ['Bottom right', 'Top right', 'Bottom left', 'Top left'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>How many pedestrians were seen walking in the background?</b>",
            name: 'video6_Question6',
            options: ['None', '1', '2', '3'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>In the intro scene, what was behind the reporter?</b>",
            name: 'video6_Question7',
            options: ['Highway', 'Stadium', "Cornfield", 'Parking lot'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>At the end, what number was on the last street sign?</b>",
            name: 'video6_Question8',
            options: ['7', '17', "42", 'No number'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What was the color of the reporter's jacket?</b>",
            name: 'video6_Question9',
            options: ['Yellow', 'Blue', 'White', 'Black'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      ],
}


var video7_questions = {
  timeline: [
      {
        type: jsPsychSurveyMultiChoice,
        questions: [
        {prompt: "<b>How many consecutive days were the stores remaining open for right before the holidays?</b>",
            name: 'video7_Question1',
            options: ['1 week straight', '3 days straight', '2 days straight', '5 days straight'], 
            required: true,
            horizontal: true,
        }]
      },
      {
        type: jsPsychSurveyMultiChoice,
         questions: [
         {prompt: "<b>How many stores was Macy's keeping open?</b>",
            name: 'video7_Question2',
            options: ['4', '10', 'More than a Dozen', 'More than 50'], 
            required: true,
            horizontal: true,
        },
         ],
    },
    {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>Of the stores that would remain open, where were most stores located?</b>",
            name: 'video7_Question3',
            options: ['East and Midwest', 'Midwest and South', 'West and East', 'West and South'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What object did the Macy's employee give to the customer?</b>",
            name: 'video7_Question4',
            options: ['Bag', 'Receipt', 'Nothing', 'Cash'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>Where was the 'FOX5' logo located?</b>",
            name: 'video7_Question5',
            options: ['Bottom right', 'Top right', 'Bottom left', 'Top left'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What information was displayed on the right side of the screen?</b>",
            name: 'video7_Question6',
            options: ['Crime reports', 'Weather', 'Sales', 'Store locations'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What were the first items being purchased by customers?</b>",
            name: 'video7_Question7',
            options: ['Bags', 'Watches', "Video games", 'Holiday decorations'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What were customers using to get downstairs?</b>",
            name: 'video7_Question8',
            options: ['Escalators', 'Stairs', "Ramp", 'Elevator'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What storefront of Macy's was first presented?</b>",
            name: 'video7_Question9',
            options: ["Macy's Women's", "Macy's Kid's", "Macy's Men's", "Macy's Bedding"], 
            required: true,
            horizontal: true,
        },
      ],
      },
      ],
}


var video8_questions = {
  timeline: [
      {
        type: jsPsychSurveyMultiChoice,
        questions: [
        {prompt: "<b>At the end, what was the name of the street being displayed?</b>",
            name: 'video8_Question1',
            options: ['Main Street', 'K Street', "2nd Street", 'Broad Street'], 
            required: true,
            horizontal: true,
        }]
      },
      {
        type: jsPsychSurveyMultiChoice,
         questions: [
         {prompt: "<b>Which university was Matt Mitchell representing?</b>",
            name: 'video8_Question2',
            options: ['Georgetown University', 'George Mason University', 'The George Washington University', 'American University'], 
            required: true,
            horizontal: true,
        },
         ],
    },
    {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What was the name of the hotel that was referenced?</b>",
            name: 'video8_Question3',
            options: ['West End Washington Hotel', 'Lombardi Hotel', 'Willard Hotel', 'The Darcy Hotel'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>Where was the 'Lobbying Connection' banner displayed?</b>",
            name: 'video8_Question4',
            options: ['Below the presidential photo', 'Above the presidential photo', 'To the right of the presidential photo', 'To the left of the presidential photo'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>Where was the 'FOX5' logo located?</b>",
            name: 'video8_Question5',
            options: ['Bottom right', 'Top right', 'Bottom left', 'Top left'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What information was displayed on the right side of the screen?</b>",
            name: 'video8_Question6',
            options: ['Crime reports', 'Weather', 'Sales', 'Stocks'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>Which flag was displayed?</b>",
            name: 'video8_Question7',
            options: ['USA flag', 'United Nations Flag', "Washington D.C. Flag", 'None of the above'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>What building was seen in the background?</b>",
            name: 'video8_Question8',
            options: ['White House', 'Washington Monument', "Capitol Building", 'Lincoln Memorial'], 
            required: true,
            horizontal: true,
        },
      ],
      },
      {
    type: jsPsychSurveyMultiChoice,
    questions: [
    {prompt: "<b>In the intro, which president was displayed?</b>",
            name: 'video8_Question9',
            options: ["Theodore Roosevelt", "Abraham Lincoln", "Ulysses Grant", "Thomas Jefferson"], 
            required: true,
            horizontal: true,
        },
      ],
      },
      ],
}


//Organize all the video questions into one array
var video_questions = [video1_questions, video2_questions, video3_questions, video4_questions, video5_questions, video6_questions, video7_questions, video8_questions];



//Re-shuffle the videos so the videos aren't shown in the same order they were presented
var new_stimlist = jsPsych.randomization.shuffle(stimlist)
console.log(new_stimlist)




//Show matching set of questions
for (var i=0; i < stimlist.length; i++){

var questions_trials = video_questions[stimlist[i]]

var image_trials_recognition = {
    data: jsPsych.timelineVariable("data"),
    type: jsPsychImageKeyboardResponse,
    prompt: "<p><div style ='font-size:40px;'><b>Here is a screenshot of a video you recently watched.</b></div></p>" +
"<p><div style ='font-size:40px;'><b>The next questions will be about this video.</b></div></p>",
    stimulus: [image_stimuli[new_stimlist[i]]],
    stimulus_width: 500,
    stimulus_height: 400,
    trial_duration: 5000,
    data: {
    image_name_recognition: image_stimuli[new_stimlist[i]],
    }
    };

timeline.push(fixation_point);
timeline.push(image_trials_recognition);
timeline.push(questions_trials)
};



//Debrief
var debrief = {
    data: {
        screen_id: "debrief" //this is basically the answer that we are putting in the screen_id column on the csv.
    },
    type: jsPsychInstructions,
    pages: [
    "<p><b>We have completed our experiment.</b></p>" + 
        "<p><b>Please contact the experimenter.</b></p>"
    ],
    show_clickable_nav: true,
    data: {enddate: fulldate}
};

timeline.push(debrief);



		/* finish connection with pavlovia.org */
		var pavlovia_finish = {
			type: jsPsychPavlovia,
			command: "finish",
			participantId: "JSPSYCH-DEMO"
		};
		timeline.push(pavlovia_finish);





//start the experiment
jsPsych.run(timeline);

    </script>
    </html>






